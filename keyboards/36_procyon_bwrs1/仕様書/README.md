# Guitar Procyon 36 仕様書

このフォルダには、Guitar Procyon 36キーボード（MaxTouch版）に関する詳細な仕様書が含まれています。

## ドキュメント一覧

### 📋 [キーマップ仕様書](./キーマップ仕様書.md)
キーボードのキーマップ構成、レイヤー設定、RGB制御、エンコーダー機能などの詳細を説明します。

**内容:**
- レイヤー構成（6レイヤー）
- 詳細キーマップ（ASCIIアート付き）
- レイヤー別RGB色変更機能
- マウス操作機能
- **横スクロール機能（新規追加）**
- **メディア制御機能（新規追加）**
- RGB制御キーの説明
- エンコーダー設定
- 特殊機能の説明

### 🔧 [ビルド手順書](./ビルド手順書.md)
ファームウェアのビルドからフラッシュまでの完全な手順を説明します。

**内容:**
- 開発環境のセットアップ
- ビルド手順
- フラッシュ手順
- トラブルシューティング
- カスタマイズ方法

### 🛠️ [開発環境構築手順書](./開発環境構築手順書.md)（新規追加）
QMK開発環境の構築から設定までを詳細に説明します。

**内容:**
- 必要なソフトウェア
- 環境構築手順
- ビルド環境の確認
- トラブルシューティング
- 開発ツールの紹介

### ⚙️ [ハードウェア仕様書](./ハードウェア仕様書.md)
キーボードのハードウェア仕様、電子部品、ピン配置などの技術詳細を説明します。

**内容:**
- 基本仕様
- 電子部品仕様
- ピン配置
- 接続仕様
- 電源仕様
- 機能仕様
- **タッチパッド安定性向上設定**

## クイックスタート

### 1. 開発環境の構築
```bash
# 詳細は「開発環境構築手順書」を参照
# 1. Python 3.7+ をインストール
# 2. MSYS2 をインストール
# 3. QMK CLI をインストール
# 4. QMKファームウェアをセットアップ
```

### 2. ファームウェアのビルド
```bash
# デフォルトキーマップでビルド
qmk compile -kb 36_procyon_bwrs1/guitar_procyon36 -km default

# または ビルドスクリプトを使用
build.bat default compile
```

### 3. フラッシュ
```bash
# ビルドとフラッシュを同時実行
qmk flash -kb 36_procyon_bwrs1/guitar_procyon36 -km default

# または ビルドスクリプトを使用
build.bat default flash
```

### 4. デバッグ（タッチパッド問題診断）
```bash
# デバッグスクリプトを実行
debug.bat
```

## 便利なスクリプト

### 🔨 ビルドスクリプト（build.bat）
```bash
# 基本的なビルド
build.bat

# カスタムキーマップでビルド
build.bat my_keymap

# フラッシュ付きビルド
build.bat default flash
```

### 🐛 デバッグスクリプト（debug.bat）
```bash
# タッチパッド問題の診断
debug.bat
```

## 主要機能

### 🎨 RGBバックライト
- **色相**: 200（シアン色）
- **アニメーション**: breathing（呼吸効果）
- **制御**: `_ADJUST`レイヤーでRGB_TOG、RGB_MOD等
- **レイヤー別色変更**: レイヤー切り替えで自動色変更

### 🎨 レイヤー別RGB色変更
| レイヤー | 色 | 説明 |
|---------|----|----|
| **`_BASE`** | 🟦 **シアン** | 基本レイヤー |
| **`_LOWER`** | 🔴 **赤** | ファンクションキー |
| **`_RAISE`** | 🟢 **緑** | 記号・数字 |
| **`_MOUSE`** | 🟣 **紫** | マウス操作 |
| **`_MEDIA`** | 🩷 **ピンク** | メディア制御（新規追加） |
| **`_ADJUST`** | 🟠 **オレンジ** | RGB設定 |

### 🖱️ ポインティングデバイス
- **タイプ**: MaxTouchデジタイザー
- **通信**: I2C（GP2/GP3）
- **機能**: タッチ、タップ、ジェスチャー
- **安定性**: I2C通信速度100kHz、デバウンス5ms、フィルタリング有効

### 🖱️ マウス操作機能
- **レイヤー**: `_MOUSE`レイヤー
- **アクセス**: `MO(1)`と`MO(2)`を同時押し
- **機能**: マウス移動、クリック、スクロール

### 🔄 エンコーダー
- **左側**: マウスホイール上下
- **右側**: 音量調整
- **レイヤー連動**: レイヤー別機能変更

### 🔄 横スクロール機能（新規追加）
- **`_BASE`レイヤー**: 右エンコーダーで横スクロール
- **`_MOUSE`レイヤー**: 左エンコーダーで横スクロール
- **`KC_MS_WH_LEFT`**: 左スクロール
- **`KC_MS_WH_RIGHT`**: 右スクロール

### 🎵 メディア制御機能（新規追加）
- **レイヤー**: `_MEDIA`レイヤー
- **機能**: メディア制御、音量制御、画面制御、アプリ起動
- **カスタムキーコード**: ズーム、明度、アプリ起動

### ⌨️ レイヤーシステム
- **`_BASE`**: 基本レイヤー（アルファベット、記号）
- **`_LOWER`**: ファンクションキー、ナビゲーション
- **`_RAISE`**: 記号、数字
- **`_MOUSE`**: マウス操作
- **`_MEDIA`**: メディア制御（新規追加）
- **`_ADJUST`**: RGB設定、特殊機能

## ブラウザ設定機能

### 🌐 VIA対応
- **ウェブサイト**: [usevia.app](https://usevia.app)
- **機能**: リアルタイムキーマップ変更
- **ファイル**: `via.json`
- **設定**: `VIA_ENABLE = yes`

### 🖥️ Vial対応
- **アプリケーション**: [vial.rocks](https://vial.rocks)
- **機能**: 高度なQMK機能対応
- **ファイル**: `vial.json`
- **設定**: `VIAL_ENABLE = yes`

### 使用方法
1. **VIA**: ブラウザで[usevia.app](https://usevia.app)にアクセス
2. **Vial**: [vial.rocks](https://vial.rocks)からアプリをダウンロード
3. キーボードを接続して設定を変更
4. リアルタイムでキーマップが反映

## レイヤー別RGB色変更機能

### 自動色変更の仕組み
- **`layer_state_set_user`関数**: レイヤー変更時に自動実行
- **`layer_colors`配列**: 各レイヤーの色を定義
- **`rgb_matrix_sethsv`関数**: RGB色を設定

### 使用方法
1. レイヤーを切り替えると自動的に色が変更
2. `_ADJUST`レイヤーで手動RGB制御も可能
3. 色のカスタマイズは`layer_colors`配列を編集

## マウス操作機能

### `_MOUSE`レイヤーの機能
- **マウス移動**: カーソル上下左右移動
- **マウスクリック**: 左クリック、右クリック、中クリック
- **マウスボタン**: サイドボタン1、2
- **スクロール**: ホイール上下スクロール

### 使用方法
1. `MO(1)`と`MO(2)`を同時に押して`_MOUSE`レイヤーにアクセス
2. 右側のキーでマウス操作を実行
3. キーを離すと`_BASE`レイヤーに戻る

## メディア制御機能（新規追加）

### `_MEDIA`レイヤーの機能
- **メディア制御**: 再生/一時停止、次のトラック、前のトラック
- **音量制御**: 音量増加、音量減少、ミュート
- **画面制御**: 明度増加、明度減少、ズーム増加、ズーム減少
- **アプリ起動**: Spotify、Discord、ターミナル、電卓、メール、エクスプローラー

### カスタムキーコード
- **`KC_ZOOM_IN`**: Ctrl + = (ズームイン)
- **`KC_ZOOM_OUT`**: Ctrl + - (ズームアウト)
- **`KC_BRIGHT_UP`**: Ctrl + ↑ (明度増加)
- **`KC_BRIGHT_DOWN`**: Ctrl + ↓ (明度減少)
- **`KC_SPOTIFY`**: Win + R → spotify
- **`KC_DISCORD`**: Win + R → discord
- **`KC_TERMINAL`**: Win + R → cmd

## エンコーダー機能

### レイヤー別エンコーダー動作
| レイヤー | 左エンコーダー | 右エンコーダー |
|---------|---------------|---------------|
| **`_BASE`** | マウスホイール上下 | **横スクロール** |
| **`_LOWER`** | 音量調整 | 画面明度調整 |
| **`_RAISE`** | ズーム調整 | メディアトラック変更 |
| **`_MOUSE`** | **横スクロール** | 縦スクロール |
| **`_MEDIA`** | 音量調整 | メディアトラック変更 |
| **`_ADJUST`** | RGB明度調整 | RGB色相調整 |

## トラブルシューティング

### よくある問題
1. **ビルドエラー**: `qmk doctor`で環境確認
2. **フラッシュエラー**: ブートローダーモードの確認
3. **機能が動作しない**: ピン配線の確認
4. **マウス操作が動作しない**: `MOUSEKEY_ENABLE`の確認
5. **RGB色が変更されない**: `RGB_MATRIX_ENABLE`の確認
6. **VIA/Vialが認識されない**: `VIA_ENABLE`/`VIAL_ENABLE`の確認
7. **横スクロールが動作しない**: エンコーダー設定の確認
8. **メディア制御が動作しない**: カスタムキーコードの確認
9. **タッチパッドが不安定**: `debug.bat`で診断

### サポート
- [QMK公式ドキュメント](https://docs.qmk.fm/)
- [QMK Discord](https://discord.gg/Uq7gcHh)
- [QMK GitHub Issues](https://github.com/qmk/qmk_firmware/issues)
- [VIA公式サイト](https://usevia.app)
- [Vial公式サイト](https://vial.rocks)

## 更新履歴

### v1.5 (2025-08-04)
- 開発環境構築手順書を追加
- ビルドスクリプト（build.bat）を追加
- デバッグスクリプト（debug.bat）を追加
- タッチパッド安定性向上設定を適用
- 仕様書を更新

### v1.4 (2025-08-04)
- 横スクロール機能を追加
- メディア制御レイヤーを追加
- カスタムキーコードを実装
- エンコーダー設定を拡張
- 仕様書を更新

### v1.3 (2025-08-04)
- VIA対応を追加
- Vial対応を追加
- ブラウザ設定機能を実装
- 仕様書を更新

### v1.2 (2025-08-04)
- レイヤー別RGB色変更機能を追加
- `layer_state_set_user`関数を実装
- レイヤーごとの色定義を追加
- 仕様書を更新

### v1.1 (2025-08-04)
- マウス操作機能を追加
- `_MOUSE`レイヤーを追加
- マウスキー機能を有効化
- 仕様書を更新

### v1.0 (2025-08-04)
- 初回作成
- キーマップ仕様書
- ビルド手順書
- ハードウェア仕様書

---

**作成日**: 2025年8月4日  
**バージョン**: 1.5（開発環境構築・スクリプト追加）  
**作成者**: QMK Firmware